---
phase: 07-scrollcontroller
plan: 02
type: execute
wave: 2
depends_on: ["07-01"]
files_modified:
  - index.html
  - styles.css
autonomous: false

must_haves:
  truths:
    - "Caret line visible at 33% from top (default position)"
    - "Tracking indicator shows 'tracking' or 'holding' state with color change"
    - "Caret position slider allows adjustment from 10% to 90%"
    - "Caret position persists across page reloads via localStorage"
  artifacts:
    - path: "index.html"
      provides: "Caret line element and tracking indicator"
      contains: "caret-line"
    - path: "styles.css"
      provides: "Styles for caret line and tracking indicator"
      contains: ".caret-line"
  key_links:
    - from: "index.html"
      to: "styles.css"
      via: "CSS classes for visual feedback"
      pattern: "tracking-indicator|caret-line"
---

<objective>
Add visual feedback elements for ScrollController - caret line and tracking state indicator.

Purpose: Users need visual cues to understand where the teleprompter is tracking and its current state. The caret line shows where upcoming text will appear, and the state indicator shows whether tracking is active or holding.

Output: Updated HTML with caret line and state indicator elements, CSS for styling, and a human verification that the visuals work correctly.
</objective>

<execution_context>
@/Users/brent/.claude/get-shit-done/workflows/execute-plan.md
@/Users/brent/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/07-scrollcontroller/07-RESEARCH.md
@.planning/phases/07-scrollcontroller/07-01-SUMMARY.md
@index.html
@styles.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add caret line and tracking indicator elements</name>
  <files>index.html</files>
  <action>
    Add two new elements to the HTML:

    1. **Caret line** - A subtle horizontal line across the teleprompter width
       - Position: fixed, top: 33% (matches default caretPercent)
       - ID: `caret-line` for JavaScript control
       - Visual: thin line (2px), semi-transparent white
       - Purpose: Shows where upcoming text will appear

    2. **Tracking indicator** - Small status badge showing current state
       - Position: fixed, top-left corner (top: 20px, left: 20px)
       - ID: `tracking-indicator` for JavaScript control
       - Content: Text showing "Tracking" or "Holding"
       - Purpose: Visual feedback for tracking state (VIS-01)

    3. **Caret position slider** - In settings panel (if exists) or create minimal settings
       - Input type: range, min=10, max=90, value=33
       - ID: `caret-slider` for JavaScript control
       - Label: "Caret Position"
       - Purpose: User-adjustable caret position (CONTEXT.md decision)

    Place elements appropriately:
    - Caret line and indicator inside or after the teleprompter container
    - Settings slider in existing settings area or new collapsible settings
  </action>
  <verify>
    Open index.html in browser, verify elements exist in DOM:
    - document.getElementById('caret-line') exists
    - document.getElementById('tracking-indicator') exists
    - document.getElementById('caret-slider') exists
  </verify>
  <done>
    HTML contains caret-line, tracking-indicator, and caret-slider elements with correct attributes
  </done>
</task>

<task type="auto">
  <name>Task 2: Add CSS styles for visual feedback</name>
  <files>styles.css</files>
  <action>
    Add styles for the new elements:

    ```css
    /* Caret line - fixed position marker */
    .caret-line {
      position: fixed;
      top: 33%;
      left: 0;
      right: 0;
      height: 2px;
      background: rgba(255, 255, 255, 0.3);
      pointer-events: none;
      z-index: 10;
    }

    /* Tracking state indicator */
    .tracking-indicator {
      position: fixed;
      top: 20px;
      left: 20px;
      padding: 8px 12px;
      border-radius: 4px;
      font-size: 12px;
      font-weight: 600;
      transition: all 0.3s ease;
      z-index: 20;
    }

    .tracking-indicator.tracking {
      background: rgba(34, 197, 94, 0.2);
      color: #22c55e;
    }

    .tracking-indicator.holding {
      background: rgba(234, 179, 8, 0.2);
      color: #eab308;
    }

    .tracking-indicator.stopped {
      background: rgba(107, 114, 128, 0.2);
      color: #6b7280;
    }

    /* Settings slider for caret position */
    .caret-setting {
      display: flex;
      align-items: center;
      gap: 10px;
      margin: 10px 0;
    }

    .caret-setting label {
      font-size: 14px;
      color: #a0a0a0;
    }

    .caret-setting input[type="range"] {
      flex: 1;
      max-width: 150px;
    }
    ```

    Match the existing style conventions in styles.css (color scheme, spacing, etc.).
    Keep the caret line subtle - it shouldn't compete with the text.
  </action>
  <verify>
    Open index.html in browser with styles loaded, verify:
    - Caret line visible as subtle horizontal line at ~1/3 from top
    - Tracking indicator positioned in top-left corner
    - Slider styled appropriately in settings area
  </verify>
  <done>
    CSS styles applied: caret line is subtle but visible, indicator has tracking/holding/stopped states with appropriate colors, slider is styled
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
    Visual feedback elements for ScrollController:
    1. Caret line - horizontal marker showing where upcoming text appears
    2. Tracking indicator - badge showing tracking/holding state
    3. Caret slider - adjust caret position (10-90%)
  </what-built>
  <how-to-verify>
    1. Open the app in browser (npm run dev or open index.html)
    2. Verify caret line:
       - Visible as subtle horizontal line across width
       - Positioned at approximately 1/3 from top of viewport
       - Semi-transparent, doesn't obscure text
    3. Verify tracking indicator:
       - Visible in top-left corner
       - Shows text (may show default state)
       - Has colored background
    4. Verify caret slider:
       - Found in settings or visible on page
       - Draggable from 10 to 90
       - Default position at ~33

    Note: Full functionality (state updates, position persistence) will be wired in Phase 8 integration.
    For now, just verify the visual elements exist and look correct.
  </how-to-verify>
  <resume-signal>Type "approved" if visuals look correct, or describe any issues</resume-signal>
</task>

</tasks>

<verification>
Manual visual inspection:
1. Caret line visible at upper third of screen
2. Tracking indicator visible in top-left with appropriate styling
3. Caret slider accessible and styled
4. All elements don't interfere with existing UI
</verification>

<success_criteria>
- [ ] Caret line element exists and styled (position: fixed, subtle appearance)
- [ ] Tracking indicator exists with tracking/holding/stopped state styles
- [ ] Caret slider exists with range 10-90, default 33
- [ ] Human verification passes - visuals look correct
</success_criteria>

<output>
After completion, create `.planning/phases/07-scrollcontroller/07-02-SUMMARY.md`
</output>
