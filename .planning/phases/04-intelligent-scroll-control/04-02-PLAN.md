---
phase: 04-intelligent-scroll-control
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - matching/Highlighter.js
autonomous: true

must_haves:
  truths:
    - "Highlighter no longer dims previously read text"
    - "Current phrase highlighting still works"
  artifacts:
    - path: "matching/Highlighter.js"
      provides: "Current position highlighting without dimming"
      contains: "current-match"
  key_links:
    - from: "matching/Highlighter.js"
      to: "CSS.highlights"
      via: "set method"
      pattern: "CSS\\.highlights\\.set.*current-match"
---

<objective>
Remove dimming of previously read text from Highlighter

Purpose: Per user feedback in CONTEXT.md ("Remove dimming entirely - user found it annoying"), the Highlighter should only highlight the current phrase without dimming text that has already been read.

Output: Simplified Highlighter.js that only manages the current-match highlight, not the previous-match highlight
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-intelligent-scroll-control/04-CONTEXT.md
@matching/Highlighter.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove previous-match dimming from Highlighter</name>
  <files>matching/Highlighter.js</files>
  <action>
Modify the Highlighter class to remove all dimming of previously read text:

1. **In highlightPosition() method:**
   - REMOVE the entire block that creates and sets 'previous-match' highlight (lines ~54-61 in current code)
   - Keep the 'current-match' highlight logic unchanged
   - The method should only set CSS.highlights.set('current-match', ...) now

2. **In clear() method:**
   - REMOVE the line `CSS.highlights.delete('previous-match')`
   - Keep only `CSS.highlights.delete('current-match')`

3. **No other changes needed** - the current phrase highlighting should work exactly as before

This is a simplification - we're removing code, not adding it.

Reason for change: User explicitly requested removal of dimming in CONTEXT.md discussion ("Remove dimming entirely - no more dimmed/read text (user found it annoying)").
  </action>
  <verify>
In Highlighter.js:
- No references to 'previous-match' string anywhere in the file
- highlightPosition() only sets 'current-match'
- clear() only deletes 'current-match'
- Current phrase highlighting logic is preserved
  </verify>
  <done>
Highlighter only highlights current phrase; previously read text appears at full opacity (no dimming)
  </done>
</task>

</tasks>

<verification>
1. `grep -c "previous-match" matching/Highlighter.js` returns 0
2. `grep "current-match" matching/Highlighter.js` still returns matches
3. File is valid JavaScript (no syntax errors)
</verification>

<success_criteria>
- No 'previous-match' highlight is set or cleared
- Current phrase highlighting works unchanged
- Existing Highlighter interface (highlightPosition, clear, setEnabled) unchanged
</success_criteria>

<output>
After completion, create `.planning/phases/04-intelligent-scroll-control/04-02-SUMMARY.md`
</output>
