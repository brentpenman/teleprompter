---
phase: 01-core-display-manual-control
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - index.html
  - styles.css
  - script.js
autonomous: true

must_haves:
  truths:
    - "User can paste script text into a textarea"
    - "User can switch from editor to teleprompter mode"
    - "User sees script in broadcast style (black background, white text)"
    - "User can switch back to editor to modify script"
  artifacts:
    - path: "index.html"
      provides: "App structure with editor and teleprompter views"
      contains: "editor-view"
    - path: "styles.css"
      provides: "Broadcast-style teleprompter styling"
      contains: "#000"
    - path: "script.js"
      provides: "Mode switching and state management"
      contains: "switchMode"
  key_links:
    - from: "script.js"
      to: "index.html"
      via: "getElementById for view switching"
      pattern: "getElementById.*editor-view|teleprompter-view"
    - from: "script.js"
      to: "textarea"
      via: "copy text to teleprompter"
      pattern: "script-input.*value|textContent"
---

<objective>
Create the foundation of the teleprompter app: HTML structure, broadcast-style CSS, and basic mode switching between editor and teleprompter views.

Purpose: Establish the core app structure that all other features build upon. User needs to paste a script and see it displayed in professional broadcast style before we add scrolling controls.

Output: Working two-mode app where user can paste text, enter teleprompter view, and return to editor.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-core-display-manual-control/01-CONTEXT.md
@.planning/phases/01-core-display-manual-control/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create HTML structure with dual-view layout</name>
  <files>index.html</files>
  <action>
Create index.html with:

1. DOCTYPE and HTML5 structure with viewport meta for mobile
2. Link to styles.css, defer script.js
3. Editor view (`#editor-view`):
   - Large textarea (`#script-input`) for pasting script
   - Placeholder text explaining to paste script
   - "Start Teleprompter" button to switch modes
4. Teleprompter view (`#teleprompter-view`, initially hidden):
   - Container div (`#teleprompter-container`) for scroll behavior
   - Text container (`#teleprompter-text`) for the script content
   - Reading marker div (`.reading-marker`) positioned at top third
   - Controls overlay (`.controls-overlay`) at bottom (content added in Plan 02)

Use semantic HTML. Keep structure clean - no inline styles. IDs match what RESEARCH.md patterns expect.
  </action>
  <verify>Open index.html in browser - should see textarea and button. No JS errors in console.</verify>
  <done>HTML file exists with both views, editor visible by default, teleprompter hidden.</done>
</task>

<task type="auto">
  <name>Task 2: Create broadcast-style CSS</name>
  <files>styles.css</files>
  <action>
Create styles.css implementing broadcast teleprompter aesthetic:

1. Reset/base styles:
   - Box-sizing border-box
   - No margin/padding on html/body
   - `overscroll-behavior: none` (prevents iOS bounce)
   - Full viewport height

2. Editor view styles:
   - Dark theme (not pure black - use #1a1a1a for editor)
   - Textarea fills most of viewport
   - System sans-serif font
   - Comfortable padding

3. Teleprompter view styles (per CONTEXT.md decisions):
   - Pure black background (#000)
   - White text (#fff)
   - System font: `system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif`
   - Line-height: 1.5 (industry standard for readability)
   - Left-aligned text (NOT centered)
   - `user-select: none` (prevent text selection)
   - Max-width ~800px centered for optimal line length
   - Padding for comfortable margins

4. Reading marker:
   - Fixed position at top: 33.33%
   - Subtle horizontal line (2px, 30% opacity white)
   - `pointer-events: none`

5. Controls overlay (structure only, buttons added in Plan 02):
   - Fixed at bottom
   - Initially `opacity: 0` with CSS transition
   - `.visible` class sets `opacity: 1`
   - `pointer-events: none` when hidden, `auto` when visible

6. Utility classes:
   - `.hidden` for display: none

Do NOT use CSS scroll-behavior: smooth (cannot control speed). Scrolling is handled by JS.
  </action>
  <verify>Refresh browser - textarea should be styled. Manually toggle teleprompter-view display in DevTools - should show black background.</verify>
  <done>All CSS classes defined, broadcast aesthetic applied, no console warnings.</done>
</task>

<task type="auto">
  <name>Task 3: Create state management and mode switching</name>
  <files>script.js</files>
  <action>
Create script.js with foundation for the app:

1. State management using Proxy pattern (from RESEARCH.md Pattern 1):
```javascript
const createState = (initialState) => {
  let listeners = [];
  const state = new Proxy(initialState, {
    set(target, property, value) {
      target[property] = value;
      listeners.forEach(listener => listener(property, value));
      return true;
    }
  });
  const subscribe = (listener) => listeners.push(listener);
  return { state, subscribe };
};
```

2. Initial state:
   - mode: 'editor' (or 'teleprompter')
   - fontSize: 48 (default, reasonable for teleprompter)
   - scrollSpeed: 50 (pixels per second, default)
   - isScrolling: false

3. Mode switching function `switchMode(newMode)`:
   - If switching to 'teleprompter':
     - Get text from `#script-input` textarea
     - Set text into `#teleprompter-text` (use textContent to avoid XSS)
     - Hide editor-view, show teleprompter-view
     - Reset scroll position to 0
   - If switching to 'editor':
     - Hide teleprompter-view, show editor-view
     - (Stop scrolling if active - placeholder for now)

4. Event listeners:
   - "Start Teleprompter" button -> switchMode('teleprompter')
   - Add placeholder for "Exit" button in overlay (will be wired in Plan 02)

5. DOMContentLoaded handler to initialize

Apply font size from state to teleprompter-text element.

Do NOT implement scrolling yet - that's Plan 02. Just the mode switching and state foundation.
  </action>
  <verify>
1. Open index.html in browser
2. Paste text into textarea
3. Click "Start Teleprompter"
4. Should see black screen with white text (your pasted text)
5. No scrolling yet (expected)
  </verify>
  <done>Mode switching works, text transfers from editor to teleprompter, state proxy functional.</done>
</task>

</tasks>

<verification>
After all tasks:
1. Open index.html in browser
2. Editor view shows with textarea and button
3. Paste any text into textarea
4. Click "Start Teleprompter"
5. See broadcast-style display (black bg, white text, left-aligned)
6. See reading marker line at top third of screen
7. No scrolling (expected - Plan 02)
8. No way to exit yet (expected - Plan 02 adds controls)
</verification>

<success_criteria>
- index.html, styles.css, script.js exist and are syntactically valid
- Editor mode: user can paste text
- Teleprompter mode: displays text in broadcast style
- Mode switch works (editor -> teleprompter)
- Reading marker visible at top third
- No JavaScript errors in console
- Requirements covered: DISP-01 (partial), DISP-05
</success_criteria>

<output>
After completion, create `.planning/phases/01-core-display-manual-control/01-01-SUMMARY.md`
</output>
